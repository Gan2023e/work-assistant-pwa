# 产品审核助手 Chrome 插件

## 功能简介

这是一个专为产品审核工作设计的Chrome浏览器插件，可以自动化执行新品审核流程：

- ✅ **批量打开产品链接** - 自动打开选中的产品链接
- 🔍 **获取网页源代码** - 自动提取网页完整源代码
- 💾 **保存审核数据** - 将获取的数据保存到后端数据库
- 🔒 **登录验证** - 只有登录用户才能使用插件功能
- ⚡ **自动化流程** - 获取完成后自动关闭标签页

## 安装方法

### 方法一：开发者模式安装（推荐）

1. **打开Chrome扩展程序页面**
   - 在Chrome浏览器中输入：`chrome://extensions/`
   - 或者点击菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**
   - 打开页面右上角的"开发者模式"开关

3. **加载插件**
   - 点击"加载已解压的扩展程序"
   - 选择 `chrome-extension` 文件夹
   - 插件将自动加载并显示在扩展程序列表中

4. **固定插件**
   - 点击浏览器工具栏的拼图图标
   - 找到"产品审核助手"并点击固定图标📌

### 方法二：打包安装

1. **打包插件**（管理员操作）
   - 在扩展程序页面点击"打包扩展程序"
   - 选择 `chrome-extension` 文件夹
   - 生成 `.crx` 文件

2. **安装.crx文件**
   - 将 `.crx` 文件拖拽到Chrome扩展程序页面
   - 点击"添加扩展程序"确认安装

## 使用方法

### 1. 确保已登录系统

在使用插件前，必须先登录工作助手PWA系统：

1. 打开工作助手网站
2. 使用有效账号登录
3. 登录成功后，插件会自动检测登录状态

### 2. 进入采购链接管理页面

1. 在系统中导航到：**产品管理** → **采购链接**
2. 或直接访问：`http://your-domain/#/products/purchase-link`

### 3. 执行新品审核

1. **勾选产品记录**
   - 在表格中勾选需要审核的产品记录
   - 可以单选或多选

2. **点击新品审核按钮**
   - 找到绿色的"新品审核"按钮
   - 按钮位于其他批量操作按钮旁边

3. **确认开始审核**
   - 系统会显示确认对话框
   - 显示将要审核的产品数量
   - 点击"确定"开始审核流程

4. **观察审核进度**
   - 插件会自动打开产品链接（后台标签页）
   - 获取网页源代码
   - 保存数据到数据库
   - 自动关闭标签页

5. **查看审核结果**
   - 审核完成后会显示结果汇总
   - 包括成功和失败的数量
   - 失败的产品会显示具体错误信息

## 插件状态说明

可以通过点击浏览器工具栏的插件图标查看状态：

### 登录状态
- 🟢 **已登录** - 可以正常使用插件功能
- 🔴 **未登录** - 需要先登录系统才能使用

### 当前页面
- 🟢 **采购链接管理 ✓** - 在正确的页面，功能可用
- 🟡 **其他页面** - 需要导航到采购链接管理页面

### 插件状态
- 🟢 **已激活** - 插件功能已就绪
- 🟡 **待激活** - 需要进入正确的页面

## 设置选项

点击插件弹窗中的"插件设置"按钮可以配置：

### 后端API地址
- 默认：`http://localhost:3001`
- 生产环境需要修改为实际的服务器地址

### 自动关闭标签页
- 默认：开启
- 审核完成后自动关闭打开的产品链接标签页

### 页面加载等待时间
- 默认：3秒
- 等待页面完全加载的时间（1-10秒）

## 故障排除

### 1. 插件无法正常工作

**检查项目：**
- [ ] Chrome插件是否已正确安装和启用
- [ ] 是否已登录工作助手系统
- [ ] 是否在采购链接管理页面
- [ ] 浏览器是否允许弹出窗口

**解决方法：**
1. 刷新页面重试
2. 重新登录系统
3. 重新加载插件（在chrome://extensions/中点击刷新）

### 2. 登录状态显示未登录

**可能原因：**
- Token已过期
- 网络连接问题
- 后端API地址错误

**解决方法：**
1. 重新登录系统
2. 检查网络连接
3. 确认插件设置中的API地址是否正确

### 3. 部分产品审核失败

**常见原因：**
- 产品链接无效或无法访问
- 网络超时
- 目标网站限制访问

**解决方法：**
1. 检查失败的产品链接是否可正常访问
2. 稍后重试
3. 单独处理失败的产品

### 4. 页面源代码获取不完整

**可能原因：**
- 页面加载时间过短
- 动态内容尚未加载完成

**解决方法：**
1. 增加页面加载等待时间（在插件设置中）
2. 针对特定网站调整策略

## 技术架构

### 插件组件
- **manifest.json** - 插件配置文件
- **background.js** - 后台服务脚本
- **content.js** - 内容脚本，注入到网页
- **popup.html/js** - 插件弹窗界面

### 通信机制
1. **页面 → Content Script** - PostMessage通信
2. **Content Script → Background** - Chrome扩展API
3. **Background → 后端API** - HTTP请求

### 数据流程
```
采购页面 → 选择产品 → 插件处理 → 批量打开链接 → 获取源码 → 保存数据 → 关闭标签页 → 显示结果
```

## 安全注意事项

- 🔒 插件只在登录状态下工作
- 🚫 不会存储用户敏感信息
- 📝 只获取公开可访问的网页内容
- 🔐 使用HTTPS加密传输数据

## 更新日志

### v1.0.0 (2025-01-08)
- ✅ 基础功能完成
- ✅ 登录验证机制
- ✅ 批量产品审核
- ✅ 网页源代码获取
- ✅ 后端数据保存
- ✅ 用户界面和状态显示

## 支持与反馈

如遇问题或需要帮助，请联系：
- 📧 技术支持邮箱：[support@example.com]
- 📱 内部工作群：[群号]
- 🔧 问题反馈：在系统中提交工单

---

**注意：** 本插件仅供内部使用，请勿分发给外部人员。 