# 浏览器插件更新日志

## v1.0.1 - 2025-01-08

### 新增功能
- ✨ skuMap信息专门提取：插件现在专门从产品页面源代码中提取"skuMap"变量内容
- 🎯 精准定位skuMap：
  - 支持各种skuMap声明方式：`var skuMap`, `let skuMap`, `const skuMap`
  - 支持对象属性中的skuMap：`window.skuMap`, `this.skuMap`
  - 支持JSON格式的skuMap对象
- 📋 双重复制功能：
  - 📋 复制skuMap：一键复制提取到的skuMap数据
  - 📋 复制源代码：一键复制完整的网页源代码

### 功能优化
- ✅ 恢复完整网页源代码显示：同时显示skuMap信息和完整HTML源代码
- 🎨 优化用户界面：
  - skuMap区域：成功时绿色背景，失败时橙色警告背景
  - 源代码区域：统一的浅灰色背景，便于查看
  - 分离显示：skuMap和源代码分别显示，便于区分
  - 双按钮设计：提供两个独立的复制按钮
- 🚀 提升性能：智能提取skuMap的同时保留完整源代码访问

### 技术改进
- 📦 重构`extractSkuMapFromSource()`函数：专门查找"skuMap"变量
- 🔧 增强`showSourceCodeResult()`函数：同时处理skuMap和源代码显示
- 🛡️ 增强错误处理：对无法解析的skuMap提供eval降级处理
- 📊 改进数据结构：返回专门的skuMap信息和完整源代码

### 用户体验提升
- 📱 双重内容：既可查看精准的skuMap数据，也可查看完整源代码
- ⚡ 提高效率：直接提供业务关键的skuMap信息
- 🎯 精准提取：专门识别skuMap变量，提高准确性
- 💡 清晰反馈：分别显示skuMap和源代码，提供独立的复制功能

## v1.0.0 - 2025-01-07

### 初始功能
- 🔍 新品审核功能：批量处理产品链接
- 🌐 网页源代码获取：自动打开链接并获取完整HTML源代码
- 💾 后端数据保存：将获取的数据保存到后端系统
- 📊 审核进度跟踪：显示当前审核进度和总数
- 🔄 分步审核：支持逐个产品审核，用户可控制节奏

---

## 使用说明

### skuMap信息提取功能
插件会自动从产品页面源代码中专门查找"skuMap"变量：

**支持的skuMap格式**：
- **变量声明**：`var skuMap = {...}`, `let skuMap = {...}`, `const skuMap = {...}`
- **对象属性**：`window.skuMap = {...}`, `this.skuMap = {...}`
- **JSON对象**：完整的JSON格式skuMap数据
- **字符串格式**：无法解析的原始字符串（降级处理）

### 操作流程
1. 在产品链接管理页面选择要审核的产品
2. 点击"新品审核"按钮
3. 插件自动打开产品链接并提取skuMap信息和完整源代码
4. 在弹窗中查看：
   - **skuMap信息**：专门提取的skuMap变量内容
   - **网页源代码**：完整的HTML源代码
5. 可以分别复制：
   - **📋 复制skuMap**：复制提取到的skuMap数据
   - **📋 复制源代码**：复制完整的网页源代码
6. 点击"下一个产品"继续审核或"完成审核"结束

### 故障排除
- 如果未找到skuMap信息，可能是该页面不包含skuMap变量或格式不被识别
- 插件会尝试多种skuMap声明模式，包括变量声明和对象属性
- 即使未找到skuMap，仍可查看和复制完整的网页源代码
- 如遇到问题，可以查看浏览器开发者工具的控制台日志 