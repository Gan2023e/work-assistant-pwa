# VAT税单平均税金功能优化

## 优化概述

本次优化在"头程物流管理"页面的VAT税单列中添加了"平均税金"显示功能，为用户提供更详细的税务信息分析。

## 功能说明

### 新增功能
- **平均税金计算**：在VAT税单列中显示平均税金金额
- **计算公式**：平均税金 = 税金 / 产品数
- **显示条件**：只有当存在税金金额且产品数大于0时才显示
- **精度控制**：保留两位小数显示

### 显示位置
在VAT税单列中，当上传了VAT税单后，会显示以下信息：
1. MRN号码（如果解析到）
2. 税金金额
3. **平均税金**（新增）
4. 税金日期

### 显示格式
```
MRN: 25GB7A8H3YNK4P0AR3
税金: £123.45
平均税金: £12.34
日期: 2024-01-15
```

## 技术实现

### 前端修改
在 `frontend/src/pages/Logistics/LogisticsPage.tsx` 文件中，修改了VAT税单列的渲染逻辑：

```typescript
{record.vatReceiptTaxAmount && record.productCount && record.productCount > 0 && (
  <div>平均税金: £{(record.vatReceiptTaxAmount / record.productCount).toFixed(2)}</div>
)}
```

### 实现特点
1. **条件显示**：只有当税金金额和产品数都存在且产品数大于0时才显示
2. **精度控制**：使用 `toFixed(2)` 保留两位小数
3. **货币符号**：使用英镑符号 £ 显示
4. **样式一致**：与其他信息保持相同的字体大小和颜色

## 使用场景

### 适用情况
- 当物流记录有上传的VAT税单
- 税单解析成功并提取到税金金额
- 记录中有有效的产品数量

### 业务价值
1. **成本分析**：帮助用户了解每个产品的平均税务成本
2. **决策支持**：为定价和成本控制提供数据支持
3. **财务规划**：便于进行税务成本预算和规划

## 注意事项

1. **数据准确性**：平均税金基于解析到的税金金额计算，确保税单解析准确性
2. **产品数验证**：只有当产品数大于0时才计算，避免除零错误
3. **显示优先级**：平均税金显示在税金金额之后，保持信息层次清晰

## 后续优化建议

1. **批量计算**：可以考虑添加批量平均税金统计功能
2. **历史对比**：显示平均税金的历史变化趋势
3. **导出功能**：支持将平均税金数据导出到Excel
4. **筛选功能**：按平均税金范围进行数据筛选 