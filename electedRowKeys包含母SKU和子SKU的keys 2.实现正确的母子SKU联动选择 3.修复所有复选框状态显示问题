[1mdiff --git a/frontend/src/pages/Products/Listings.tsx b/frontend/src/pages/Products/Listings.tsx[m
[1mindex 709f10e..2cbce2b 100644[m
[1m--- a/frontend/src/pages/Products/Listings.tsx[m
[1m+++ b/frontend/src/pages/Products/Listings.tsx[m
[36m@@ -377,83 +377,99 @@[m [mconst Listings: React.FC = () => {[m
   const handleRowSelection = {[m
     selectedRowKeys,[m
     onChange: (newSelectedRowKeys: any[], newSelectedRows: any[]) => {[m
[31m-      // åªä¿ç•™å­SKUçš„keysï¼Œè¿‡æ»¤æŽ‰parent-å¼€å¤´çš„keys[m
[31m-      const childKeys = newSelectedRowKeys.filter(key => !key.startsWith('parent-'));[m
[31m-      const childRows = newSelectedRows.filter(row => row && !row.isParentRow);[m
[32m+[m[32m      // è¿™ä¸ªæ–¹æ³•ä¸»è¦ç”±Ant Designå†…éƒ¨è°ƒç”¨ï¼Œæˆ‘ä»¬åœ¨onSelectå’ŒonSelectAllä¸­å¤„ç†å…·ä½“é€»è¾‘[m
[32m+[m[32m      // è¿™é‡Œåªæ˜¯ç¡®ä¿çŠ¶æ€åŒæ­¥[m
[32m+[m[32m      const hierarchicalData = getHierarchicalData();[m
       [m
[31m-      setSelectedRowKeys(childKeys);[m
[31m-      setSelectedRows(childRows);[m
[32m+[m[32m      // è®¡ç®—å®žé™…åº”è¯¥é€‰ä¸­çš„keysï¼ˆåŒ…æ‹¬æ¯SKUçš„è”åŠ¨çŠ¶æ€ï¼‰[m
[32m+[m[32m      const finalSelectedKeys = calculateFinalSelectedKeys(newSelectedRowKeys, hierarchicalData);[m
[32m+[m[41m      [m
[32m+[m[32m      // æå–å­SKUè®°å½•ç”¨äºŽå¤–éƒ¨ä½¿ç”¨[m
[32m+[m[32m      const selectedChildRows = hierarchicalData[m
[32m+[m[32m        .filter(row => !row.isParentRow && finalSelectedKeys.includes(row.key!))[m
[32m+[m[32m        .map(row => row as ParentSkuData);[m
[32m+[m[41m      [m
[32m+[m[32m      setSelectedRowKeys(finalSelectedKeys);[m
[32m+[m[32m      setSelectedRows(selectedChildRows);[m
     },[m
     onSelect: (record: ExpandedParentSkuData, selected: boolean) => {[m
[31m-      const key = record.key!;[m
[32m+[m[32m      const hierarchicalData = getHierarchicalData();[m
       [m
       if (record.isParentRow) {[m
[31m-        // é€‰æ‹©æ¯SKUæ—¶ï¼Œé€‰æ‹©/å–æ¶ˆé€‰æ‹©æ‰€æœ‰å­SKU[m
[32m+[m[32m        // é€‰æ‹©æ¯SKUæ—¶ï¼Œè”åŠ¨é€‰æ‹©æ‰€æœ‰å­SKU[m
         const childKeys = record.childSkus?.map(child => child.skuid || `child-${child.child_sku}`).filter(Boolean) || [];[m
[32m+[m[32m        const parentKey = record.key!;[m
[32m+[m[41m        [m
[32m+[m[32m        let newSelectedKeys: string[];[m
         [m
         if (selected) {[m
[31m-          // æ·»åŠ æ‰€æœ‰å­SKUåˆ°é€‰æ‹©åˆ—è¡¨[m
[31m-          const newKeys = Array.from(new Set([...selectedRowKeys, ...childKeys]));[m
[31m-          const newRows = [...selectedRows];[m
[31m-          [m
[31m-          // ç¡®ä¿æ·»åŠ æ‰€æœ‰å­SKUè®°å½•[m
[31m-          record.childSkus?.forEach(childSku => {[m
[31m-            const childKey = childSku.skuid || `child-${childSku.child_sku}`;[m
[31m-            if (!newRows.some(row => (row.skuid || `child-${row.child_sku}`) === childKey)) {[m
[31m-              newRows.push(childSku);[m
[31m-            }[m
[31m-          });[m
[31m-          [m
[31m-          setSelectedRowKeys(newKeys);[m
[31m-          setSelectedRows(newRows);[m
[32m+[m[32m          // é€‰ä¸­æ¯SKUï¼šæ·»åŠ æ¯SKU keyå’Œæ‰€æœ‰å­SKU keys[m
[32m+[m[32m          newSelectedKeys = Array.from(new Set([...selectedRowKeys, parentKey, ...childKeys]));[m
         } else {[m
[31m-          // ç§»é™¤æ‰€æœ‰å­SKU[m
[31m-          const newKeys = selectedRowKeys.filter(k => !childKeys.includes(k));[m
[31m-          const newRows = selectedRows.filter(row => {[m
[31m-            const rowKey = row.skuid || `child-${row.child_sku}`;[m
[31m-            return !childKeys.includes(rowKey);[m
[31m-          });[m
[31m-          setSelectedRowKeys(newKeys);[m
[31m-          setSelectedRows(newRows);[m
[32m+[m[32m          // å–æ¶ˆé€‰ä¸­æ¯SKUï¼šç§»é™¤æ¯SKU keyå’Œæ‰€æœ‰å­SKU keys[m
[32m+[m[32m          newSelectedKeys = selectedRowKeys.filter(key => key !== parentKey && !childKeys.includes(key));[m
         }[m
[32m+[m[41m        [m
[32m+[m[32m        // æå–å­SKUè®°å½•[m
[32m+[m[32m        const selectedChildRows = hierarchicalData[m
[32m+[m[32m          .filter(row => !row.isParentRow && newSelectedKeys.includes(row.key!))[m
[32m+[m[32m          .map(row => row as ParentSkuData);[m
[32m+[m[41m        [m
[32m+[m[32m        setSelectedRowKeys(newSelectedKeys);[m
[32m+[m[32m        setSelectedRows(selectedChildRows);[m
       } else {[m
[31m-        // é€‰æ‹©å­SKU[m
[32m+[m[32m        // é€‰æ‹©å­SKUæ—¶ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦è”åŠ¨æ¯SKU[m
[32m+[m[32m        const childKey = record.key!;[m
[32m+[m[32m        let newSelectedKeys: string[];[m
[32m+[m[41m        [m
         if (selected) {[m
[31m-          setSelectedRowKeys([...selectedRowKeys, key]);[m
[31m-          setSelectedRows([...selectedRows, record]);[m
[32m+[m[32m          // é€‰ä¸­å­SKU[m
[32m+[m[32m          newSelectedKeys = [...selectedRowKeys, childKey];[m
         } else {[m
[31m-          setSelectedRowKeys(selectedRowKeys.filter(k => k !== key));[m
[31m-          setSelectedRows(selectedRows.filter(row => (row.skuid || `child-${row.child_sku}`) !== key));[m
[32m+[m[32m          // å–æ¶ˆé€‰ä¸­å­SKU[m
[32m+[m[32m          newSelectedKeys = selectedRowKeys.filter(key => key !== childKey);[m
         }[m
[32m+[m[41m        [m
[32m+[m[32m        // æ£€æŸ¥æ¯SKUçŠ¶æ€å¹¶æ›´æ–°[m
[32m+[m[32m        const finalKeys = calculateFinalSelectedKeys(newSelectedKeys, hierarchicalData);[m
[32m+[m[41m        [m
[32m+[m[32m        // æå–å­SKUè®°å½•[m
[32m+[m[32m        const selectedChildRows = hierarchicalData[m
[32m+[m[32m          .filter(row => !row.isParentRow && finalKeys.includes(row.key!))[m
[32m+[m[32m          .map(row => row as ParentSkuData);[m
[32m+[m[41m        [m
[32m+[m[32m        setSelectedRowKeys(finalKeys);[m
[32m+[m[32m        setSelectedRows(selectedChildRows);[m
       }[m
     },[m
     onSelectAll: (selected: boolean, selectedRows: ExpandedParentSkuData[], changeRows: ExpandedParentSkuData[]) => {[m
       if (selected) {[m
[31m-        // å…¨é€‰ï¼šèŽ·å–å½“å‰é¡µé¢æ‰€æœ‰å­SKUçš„key[m
[32m+[m[32m        // å…¨é€‰ï¼šèŽ·å–æ‰€æœ‰è¡Œçš„keysï¼ˆåŒ…æ‹¬æ¯SKUå’Œå­SKUï¼‰[m
         const hierarchicalData = getHierarchicalData();[m
[31m-        const allChildKeys: string[] = [];[m
[31m-        const allChildRows: ParentSkuData[] = [];[m
[32m+[m[32m        const allKeys: string[] = [];[m
         [m
         hierarchicalData.forEach(row => {[m
[32m+[m[32m          if (row.key) {[m
[32m+[m[32m            allKeys.push(row.key);[m
[32m+[m[32m          }[m
[32m+[m[32m          // å¦‚æžœæ˜¯æ¯SKUï¼Œè¿˜è¦æ·»åŠ å…¶æ‰€æœ‰å­SKUçš„keys[m
           if (row.isParentRow && row.childSkus) {[m
             row.childSkus.forEach(child => {[m
               const childKey = child.skuid || `child-${child.child_sku}`;[m
[31m-              if (childKey && !allChildKeys.includes(childKey)) {[m
[31m-                allChildKeys.push(childKey);[m
[31m-                allChildRows.push(child);[m
[32m+[m[32m              if (childKey && !allKeys.includes(childKey)) {[m
[32m+[m[32m                allKeys.push(childKey);[m
               }[m
             });[m
[31m-          } else if (!row.isParentRow) {[m
[31m-            const childKey = row.key!;[m
[31m-            if (!allChildKeys.includes(childKey)) {[m
[31m-              allChildKeys.push(childKey);[m
[31m-              allChildRows.push(row);[m
[31m-            }[m
           }[m
         });[m
         [m
[31m-        setSelectedRowKeys(allChildKeys);[m
[31m-        setSelectedRows(allChildRows);[m
[32m+[m[32m        // æå–å­SKUè®°å½•[m
[32m+[m[32m        const selectedChildRows = hierarchicalData[m
[32m+[m[32m          .filter(row => !row.isParentRow)[m
[32m+[m[32m          .map(row => row as ParentSkuData);[m
[32m+[m[41m        [m
[32m+[m[32m        setSelectedRowKeys(allKeys);[m
[32m+[m[32m        setSelectedRows(selectedChildRows);[m
       } else {[m
 